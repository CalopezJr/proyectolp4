import React, { useState } from 'react';
import { BrowserRouter as Router, Route, Routes } from 'react-router-dom';
import Login from './Login';
import ForgotPassword from './ForgotPassword';
import Estadisticas from './Estadisticas';
import Feed from './Feed';
import Header from './Header';
import Notifications from './Notifications'; // Importa el componente de Notificaciones
import './App.css';

function App() {
    const [notifications, setNotifications] = useState([]);

    // Función para agregar una nueva notificación
    const addNotification = (message, link) => {
        const newNotification = { id: notifications.length + 1, message, link };
        setNotifications([...notifications, newNotification]);
    };

    // Función para marcar una notificación como leída
    const markAsRead = (id) => {
        const updatedNotifications = notifications.map(notification =>
            notification.id === id ? { ...notification, read: true } : notification
        );
        setNotifications(updatedNotifications);
    };

    return (
        <Router>
            <div className="App">
                <Header notificationsCount={notifications.filter(notification => !notification.read).length} /> {/* Incluye el componente Header y pasa la cantidad de notificaciones no leídas */}
                <Routes>
                    <Route path="/" element={<Login />} />
                    <Route path="/forgot-password" element={<ForgotPassword />} />
                    <Route path="/estadisticas" element={<Estadisticas />} />
                    <Route path="/feed" element={<Feed />} />
                    <Route path="/notifications" element={<Notifications notifications={notifications} markAsRead={markAsRead} />} /> {/* Ruta para el componente de Notificaciones */}
                </Routes>
            </div>
        </Router>
    );
}

export default App;
